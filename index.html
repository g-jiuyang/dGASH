<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dGASH</title>
    <link rel="icon" href="images/favicon.ico" type="images/favicon.ico"/>
    <link rel="shortcut icon" href="images/favicon.ico" type="images/favicon.ico"/>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/header.css">
    <!-- layout-key-vision -->
    <link rel="stylesheet" href="css/key-vision-desc.css">
    <link rel="stylesheet" href="css/key-vision-table.css">
    <link rel="stylesheet" href="css/sub-banner.css">
    <link rel="stylesheet" href="css/popup-teaching.css">
    <link rel="stylesheet" href="css/popup-basic.css">
    <link rel="stylesheet" href="css/popup-transfer.css">
    <link rel="stylesheet" href="css/loading.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/cookie.css">
</head>
<body class="hidden">
    <div id="app">
        <header>
            <div class="fixed-top">
                <div class="content">
                    <h1 class="brand-logo"><a href="index.html"><img src="images/logo.svg" alt="dGASH"></a></h1>
                    <div class="account">
                        <!-- <div class="points"><img src="images/icon/ic-dGash.svg" alt="">300,000</div> -->
                         <!-- 成功連接錢包後，請於 button > p 內放入錢包帳號 -->
                        <button @click="openSubMenu"><p>連接錢包</p></button>
                    </div>
                    <button class="m-nav-icon" @click="openNav">
                        <img src="images/icon/ic-m-nav.svg" alt="">
                    </button>
                </div>
            </div>
            <nav>
                <button class="hide" @click="hideBlackWall"><img src="images/icon/ic-m-nav-hide.svg" alt=""></button>
                <ul>
                    <li class="active"><a href="index.html">轉換頁</a></li>
                    <li><a href="#" target="_blank">轉換教學</a></li>
                    <li><a href="record.html">轉換紀錄</a></li>
                    <li><a href="qa.html">常見問題</a></li>
                    <li><a href="about.html">關於數位點</a></li>
                </ul>
            </nav>
            <div class="subMenu-box">
                <div class="content">
                    <div class="subMenu">
                        <button class="hide" @click="hideBlackWall"><img src="images/icon/ic-m-nav-hide.svg" alt=""></button>
                        <!-- <div class="points"><img src="images/icon/ic-dGash.svg" alt="">300,000</div> -->
                        <ul>
                            <li><a href="#">登出</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </header>
        <main>
            <!-- 當有輪播banner，請於當 class="layout-key-vision" 增加 class:have-sub-banner -->
            <div class="layout-key-vision">
                <section class="key-vision-desc">
                    <p class="title">數位點轉換平台</p>
                    <p class="subtitle">輕鬆將你的數位點轉換成GASH點數</p>
                    <p class="txt">使用GASH數位點轉換，<b>至高享9折優惠！</b><br>
                        GASH數位點 - 創新的Web 3.0區塊鏈發行技術，為你的資產安全加滿分！</p>
                    <a href="#" target="_blank" class="cta-btn">取得 GASH 數位點</a>
                    <a href="#" target="_blank" class="txt-btn">新增數位點到 Metamask</a>
                </section>
                <section class="key-vision-table">
                    <p class="table-title">將數位點轉換為GASH<button class="info-btn" @click="openPopup"><img src="images/icon/ic-comment.svg" alt=""></button></p>
                    <p class="title">STEP 1. 選擇轉換方式</p>
                    <div class="tab-menu">
                        <button v-on:click="activetab='1'" v-bind:class="[ activetab === '1' ? 'active' : '' ]">序號儲值</button>
                        <button v-on:click="activetab='2'" v-bind:class="[ activetab === '2' ? 'active' : '' ]">beanfun! 會員錢包限定</button>
                    </div>
                    <p class="title">STEP 2. 選擇面額</p>
                    <div class="select-box" @click="openSelectNav">
                        <div class="box-l">
                            <img src="images/icon/ic-gash.svg" alt="">
                        </div>
                        <div class="box-r"><p>請選擇面額</p></div>
                        <div class="select-nav">
                            <ul>
                                <template v-for="item,idx in selectList">
                                    <template v-if="item.sell === 1" key="sell"><li>{{item.point}}</li></template>
                                    <template v-if="item.sell === 2" key="sellOut"><li class="disabled">{{item.point}}</li></template>
                                </template>
                            </ul>
                        </div>
                    </div>
                    <div class="add-amount">
                        <p class="title">STEP 3. 選擇數量</p>
                        <div class="amount">
                            <button id="add" class="cursor-pointer"><img src="images/icon/ic-minus.svg" alt=""></button>
                            <input id="quantity" type="text" value="9999" class="input-amount"> 
                            <!-- 無法點擊時，請於當 button 增加 class="none" -->
                            <button id="min" class="cursor-pointer none"><img src="images/icon/icon-plus.svg" alt=""></button>
                        </div>
                    </div>
                    <div class="convert">
                        <div class="offer">8% off</div>
                        <div class="point-box">
                            <p>轉換所需點：</p>
                            <div class="change">
                                <p class="points">920</p>
                                <div class="selectr-box" @click="openSelectBoxNav">
                                    <div class="confirm">
                                        <img src="images/icon/ic-dGash.svg" alt="">
                                        <span>GASH</span>
                                    </div>
                                    <div class="selectr-box-nav">
                                        <ul>
                                            <template v-for="item,idx in pointList">
                                                <template v-if="item.state === 1" key="stateBlock">
                                                    <li>
                                                        <div class="main"><img :src="item.img" alt=""><span>{{item.pointMain}}</span></div>
                                                        <div class="minor">{{item.pointMinor}}</div>
                                                    </li>
                                                </template>
                                                <template v-if="item.state === 2" key="stateNone">
                                                    <li class="disabled">
                                                        <div class="main"><img :src="item.img" alt=""><span>{{item.pointMain}}</span></div>
                                                        <div class="minor">{{item.pointMinor}}</div>
                                                    </li>
                                                </template>
                                            </template>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="checkbox">
                        <input id="agreement" type="checkbox" v-model="agree">
                        <label for="agreement">我已閱讀並同意<a href="" target="_blank">服務條款</a>、<a href="" target="_blank">隱私權政策</a>與<button @click="openPopup">注意事項</button>
                        </label>
                    </div>
                    <!-- <button class="btn" :disabled="!agree" @click="viewRecords">轉換</button> -->
                    <button class="btn" :disabled="!agree" @click="openPopupTransfer">轉換</button>
                </section>
                <section class="sub-banner">
                    <ul>
                        <li><a href="#" target="_blank">
                            <img src="images/banner/subBanner.jpg" alt="">
                        </a></li>
                    </ul>
                    <div class="control">
                        <button></button>
                        <button class="center"></button>
                        <button></button>
                    </div>
                </section>
            </div>
        </main>
        <footer>
            <div class="ft-sitemap">
                <ul>
                    <li><a href="#">關於GASH</a></li>
                    <li><a href="#">服務條款</a></li>
                    <li><a href="privacy.html">隱私權和Cookie聲明</a></li>
                    <li><a href="#">聯繫客服</a></li>
                </ul>
            </div>
            <p>© 2022 GASH POINT Co., Ltd. All right reserved</p>
        </footer>
<!-- 遮屏 -->
        <section class="black-wall"></section>
<!-- cookie -->
        <section class="cookie" style="display: none;">
            <p>我們使用 cookie 來增強您的體驗並分析我們網站使用情況。更多資訊，請參閱我們的<a href="#">隱私權和Cookie聲明</a></p>
            <button @click="cookieHide">我知道了</button>
        </section>
<!-- popup 教學步驟 -->
        <section class="popup-teaching">
            <div class="content">
                <div class="d-step1">
                    <img src="images/step/d_step1.svg" alt="" class="desk">
                    <img src="images/step/m_step1.svg" alt="" class="mobile">
                    <div class="step-box">
                        <div class="content-box">
                            <p class="title">教學 (1/2)</p>
                            <p class="desc">STEP 1. 連接MetaMask錢包</p>
                            <div class="step-btn">
                                <button @click="stepHide">跳過教學</button>
                                <button  @click="stepTo">下一步</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-step2" style="display: none;">
                    <img src="images/step/d_step2.svg" alt="" class="desk w-1200">
                    <img src="images/step/m_step2.svg" alt="" class="mobile w-1200">
                    <div class="step-box">
                        <div class="content-box">
                            <p class="title">教學 (2/2)</p>
                            <p class="desc">STEP 2. 數位點轉換</p>
                            <div class="step-btn">
                                <button  @click="stepHide">教學完成</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
<!-- basic popup -->
        <section class="popup-basic" @click="hidePopup" style="display: none;">
            <button class="hide"><img src="images/icon/ic-m-nav-hide.svg" alt=""></button>
            <p class="title">連接錢包</p>
            <p class="desc">您即將兌換「<b>XXXXX(商品名稱)</b>」x3 ，一旦兌換成功將扣除帳戶內的蟲蟲幣 <b>4,500</b> 顆。</p>
            <button class="cta-btn">連接錢包</button>
        </section>
<!-- transfer popup -->
        <section class="popup-transfer" style="display: none;">
            <button class="hide" @click="hidePopupTransfer"><img src="images/icon/ic-m-nav-hide.svg" alt=""></button>
            <p class="title">轉換費用確認</p>
            <div class="popup-content">
                <p class="amount">12,228<span>GASH</span></p>
                <dl>
                    <dt>商品名稱</dt>
                    <dd>GASH 10,000 點</dd>
                    <dt>轉換方式</dt>
                    <dd>取得序號</dd>
                    <dt>數量</dt>
                    <dd>1</dd>
                    <!-- Key & Value 可無限增加 (dt=Key, dd=Value) -->
                </dl>
                <div class="sub-title">
                    發票資料
                    <button id="invoice-info-toggle" class="info-btn"><img src="images/icon/ic-comment.svg" alt=""></button>
                    <div id="invoice-info">
                        <p class="desc">
                            財政部於2013年1月1日起正式推動電子發票虛實合一政策！<br>
                            此政策讓持有共通性載具之消費者，可於消費時作為電子發票之載具，並提供消費者以捐贈碼捐贈予特定受捐贈機關或團體之管道。<br>
                            有關【共通性載具】與【捐贈碼】詳細介紹與資訊，詳見<a href="https://www.einvoice.nat.gov.tw/index" target="_blank">財政部電子發票整合服務平台</a>說明。
                        </p>
                        <p class="desc">
                            注意：<br>
                            如資料有誤導致無法寄達，我們將直接把發票捐贈給(社團法人台灣一起夢想公益協會)<br>
                            因應財政部推廣無紙化作業，即日起將不再主動寄送紙本發票，若仍有索取紙本需求請與樂點客服聯繫。
                        </p>
                    </div>
                </div>
                <div class="checkbox">
                    <input type="checkbox" id="no-invoice">
                    <label for="no-invoice">我不需要索取發票，請直接捐贈給指定社團法人( 捐贈碼：510 )</label>
                </div>
                <div id="invoice">
                    <div id="invoice-select" class="selector">
                        <span>請選擇</span>
                        <div>
                            <ul>
                                <li id="invoice-select-1">我要捐贈</li> 
                                <li id="invoice-select-2">個人發票</li>
                                <li id="invoice-select-3">公司用發票</li>
                            </ul>
                        </div>
                    </div>
                    <div id="invoice-select-content-1" class="invoice-type">
                        <p>受捐贈機關或團體之捐贈碼 <button class="info-btn" onclick="window.open('https://www.einvoice.nat.gov.tw/APCONSUMER/BTC603W/', '_blank')"><img src="images/icon/ic-comment.svg" alt=""></button></p>
                        <input type="text" value="510" placeholder="請輸入捐贈碼(限數字)">
                        <p>Email 信箱 (選填)</p>
                        <input type="email" placeholder="請輸入Email信箱">
                    </div>
                    <div id="invoice-select-content-2" class="invoice-type">
                        <p>*電子發票載具類別 <button class="info-btn" onClick="window.open('https://www.einvoice.nat.gov.tw/', '_blank')"><img src="images/icon/ic-comment.svg" alt=""></button></p>
                        <div id="carrier-select" class="selector">
                            <span>未持有</span>
                            <div>
                                <ul>
                                    <li id="carrier-select-1">未持有</li> 
                                    <li id="carrier-select-2">手機條碼</li>
                                    <li id="carrier-select-3">自然憑證條碼</li>
                                </ul>
                            </div>
                        </div>
                        <input type="text" id="carrier-select-content-2" class="carrier-select-content" placeholder="請輸入手機條碼">
                        <input type="text" id="carrier-select-content-3" class="carrier-select-content" placeholder="請輸入自然憑證條碼">
                        <p>*Email 信箱</p>
                        <input type="email" placeholder="請輸入Email信箱" required>
                        <label>此Email信箱僅供寄送電子發票開立通知使用。</label>
                    </div>
                    <div id="invoice-select-content-3" class="invoice-type">
                        <p>*公司抬頭或姓名</p>
                        <input type="text" placeholder="請輸入公司抬頭或姓名" required>
                        <p>*統一編號</p>
                        <input type="text" placeholder="請輸入統一編號" required>
                        <p>*Email 信箱</p>
                        <input type="email" placeholder="請輸入Email信箱" required>
                        <p>*寄送地址(即日起不主動寄送紙本發票)</p>
                        <div id="county-select" class="selector" required>
                            <span>請選擇縣市</span>
                            <div>
                                <ul>
                                    <li id="county-1">臺北市</li> 
                                    <li id="county-2">新北市</li>
                                    <li id="county-3">基隆市</li>
                                    <li id="county-4">桃園市</li> 
                                    <li id="county-5">新竹縣</li>
                                    <li id="county-6">苗栗縣</li>
                                    <li id="county-7">臺中市</li> 
                                    <li id="county-8">彰化縣</li>
                                    <li id="county-9">南投縣</li>
                                    <li id="county-10">雲林縣</li> 
                                    <li id="county-11">嘉義縣</li>
                                    <li id="county-12">臺南市</li>
                                    <li id="county-13">高雄市</li> 
                                    <li id="county-14">屏東縣</li> 
                                    <li id="county-15">宜蘭縣</li> 
                                    <li id="county-16">花蓮縣</li> 
                                    <li id="county-17">臺東縣</li> 
                                    <li id="county-18">澎湖縣</li> 
                                    <li id="county-19">綠島</li> 
                                    <li id="county-20">蘭嶼</li> 
                                    <li id="county-21">金門縣</li> 
                                    <li id="county-22">馬祖</li> 
                                    <li id="county-23">連江縣</li> 
                                </ul>
                            </div>
                        </div>
                        <div id="city-select" class="selector">
                            <span>請選擇鄉鎮市區</span>
                            <div>
                                <ul>
                                    <li id="city-1">松山區</li> 
                                    <li id="city-2">信義區</li>
                                    <li id="city-3">中正區</li>
                                    <li id="city-4">大同區</li> 
                                    <li id="city-5">中山區</li>
                                    <li id="city-6">大安區</li>
                                    <li id="city-7">萬華區</li> 
                                    <li id="city-8">士林區</li>
                                    <li id="city-9">北投區</li>
                                    <li id="city-10">內湖區</li> 
                                    <li id="city-11">南港區</li>
                                    <li id="city-12">文山區</li>
                                </ul>
                            </div>
                        </div>
                        <input type="text" placeholder="輸入寄送地址，請勿填寫郵政信箱" required>
                    </div>
                </div>
            </div>
            <p class="warning">報價已過期，請重新取得報價</p> <!-- 下方button倒數結束後才出現此訊息 -->
            <button id="viewRecords" class="cta-btn" :disabled="!agree" @click="viewRecords">確認兌換 (3s)</button> <!-- 倒數結束後按鈕變為「更新報價」(參考Figma) -->
        </section>
<!-- loading -->
        <section class="loading" style="display: none;">
            <span class="loader"></span>
        </section>
    </div>
    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="js/vue.min.js"></script>
    <script>
        var vm = new Vue({
            el: '#app',
            data() {
                return {
                    activetab: '1',
                    agree: false,
                    url: './success.html',
                    selectList:[
                        {
                            sell: 1,
                            point: '1,000',
                        },
                        {
                            sell: 2,
                            point: '5,000',
                        },
                        {
                            sell: 2,
                            point: '10,000',
                        },
                        {
                            sell: 1,
                            point: '20,000',
                        },
                    ],
                    pointList:[
                        {
                            state: 1,
                            img: 'images/icon/ic-dGash.svg',
                            pointMain: 'GASH',
                            pointMinor: 'Polygon',
                        },
                        {
                            state: 1,
                            img: 'images/icon/ic-usdt.svg',
                            pointMain: 'USDT',
                            pointMinor: 'Ethereum',
                        },
                        {
                            state: 2,
                            img: 'images/icon/ic-eth.svg',
                            pointMain: 'ETH',
                            pointMinor: 'xxxxx',
                        },
                        {
                            state: 2,
                            img: 'images/icon/ic-bnb.svg',
                            pointMain: 'BNB',
                            pointMinor: 'xxxxx',
                        },
                    ],
                }
            },
            methods: {
                openSubMenu: function(){
                    var windowW = window.innerWidth;
                    if(windowW < 768){
                        $('.black-wall').show();
                        $('.subMenu-box').slideToggle();
                        $('body').toggleClass('hidden');
                    }else{
                        $('.subMenu-box').slideToggle();
                        $('body').toggleClass('hidden');
                    }
                },
                openNav: function(){
                    var windowW = window.innerWidth;
                    if(windowW < 768){
                        $('.black-wall').show();
                        $('nav').slideToggle();
                        $('body').toggleClass('hidden');
                    }else{
                        $('nav').slideToggle();
                        $('body').toggleClass('hidden');
                    }
                },
                hideBlackWall: function(){
                    var windowW = window.innerWidth;
                    if(windowW < 768){
                        $('.black-wall').hide();
                        $('nav').hide();
                        $('.subMenu-box').hide();
                        $('body').toggleClass('hidden');
                    }else{}
                },
                openSelectNav: function(){
                    $('.select-nav').slideToggle();
                },
                openSelectBoxNav: function(){
                    $('.selectr-box-nav').slideToggle();
                },
                cookieHide: function(){
                    document.getElementsByClassName('cookie')[0].style.display = 'none';
                },
                viewRecords(){
                    window.location.href = this.url;
                },
                stepTo: function(){
                    $('.d-step1').hide();
                    $('.d-step2').show();
                    $('.black-wall').show();
                },
                stepHide: function(){
                    $('.black-wall').hide();
                    $('.popup-teaching').hide()
                    $('body').removeClass('hidden');
                },
                hidePopup: function(){
                    $('.black-wall').hide();
                    $('.popup-basic').hide();
                    $('body').removeClass('hidden');
                },
                openPopup: function(){
                    $('.black-wall').show();
                    $('.popup-basic').show();
                    $('body').addClass('hidden');
                },
                hidePopupTransfer: function(){
                    $('.black-wall').hide();
                    $('.popup-transfer').hide();
                    $('body').removeClass('hidden');
                },
                openPopupTransfer: function(){
                    $('.black-wall').show();
                    $('.popup-transfer').show();
                    $('body').addClass('hidden');
                },
            },
        });
/*
        $(document).mouseup(function (e) {
            var windowW = window.innerWidth;
            var subMenuBox = $(".subMenu-box");
            var nav = $("nav");
            var selectNav = $(".select-nav");
            var selectrBoxNav = $(".selectr-box-nav");
            var popupTeaching = $(".popup-teaching");
            var popupBasic = $(".popup-basic");
            var popupTransfer = $(".popup-transfer");

            if (!subMenuBox.is(e.target) && subMenuBox.has(e.target).length === 0 ||
                !nav.is(e.target) && nav.has(e.target).length === 0 ||
                !selectNav.is(e.target) && selectNav.has(e.target).length === 0 ||
                !selectrBoxNav.is(e.target) && selectrBoxNav.has(e.target).length === 0 ||
                !popupBasic.is(e.target) && popupBasic.has(e.target).length === 0 ||
                !popupTransfer.is(e.target) && popupTransfer.has(e.target).length === 0
            ){
                subMenuBox.hide();
                selectNav.hide(); 
                selectrBoxNav.hide();
                popupTeaching.hide();
                popupBasic.hide();
                popupTransfer.hide();
                $('.black-wall').hide();
                $('body').removeClass('hidden');

                if(windowW < 768){
                    nav.hide();
                }
            };
        });
*/
        // 發票資料開合
        $('#invoice-info-toggle').click(function(){
            $('#invoice-info').toggleClass('open')
            setTimeout(function(){
                // $('.popup-content').scrollTop($('.popup-content').height())
                $('.popup-content').scrollTop(200)
            }, 65);
        })

        // 勾選不要發票
        $('#no-invoice').click(function(){
            $('#invoice').toggleClass('hidden')
            $('#submit').removeAttr('disabled');
        })

        // 發票下拉選單
        $('#invoice-select').click(function(){
            $('#carrier-select').removeClass('open')
            $('#county-select').removeClass('open')
            $('#city-select').removeClass('open')
            $(this).toggleClass('open')
            setTimeout(function(){
                $('.popup-content').scrollTop($('.popup-content').height())
            }, 250);
        })
        $(function() {
            for ( let i = 1; i <= 3; i++ ) {
                let clickedButton = $('#invoice-select-'+i);
                let listContent = $('#invoice-select-content-'+i);
                $(clickedButton).click(function() {
                    $('#invoice-select span').html($(this).html())
                    $('#invoice-select span').css('color','#344054')
                    $('.invoice-type').removeClass('show')
                    $(listContent).addClass('show')
                    $('#submit').removeAttr('disabled')
                })
            }
        });

        // 電子發票載具類別下拉選單
        $('#carrier-select').click(function(){
            $('#invoice-select').removeClass('open')
            $(this).toggleClass('open')
        })
        $(function() {
            for ( let i = 1; i <= 3; i++ ) {
                let clickedButton = $('#carrier-select-'+i);
                let listContent = $('#carrier-select-content-'+i);
                $(clickedButton).click(function() {
                    $('#carrier-select span').html($(this).html())
                    $('#carrier-select span').css('color','#344054')
                    $('.carrier-select-content').removeClass('show')
                    $(listContent).addClass('show')
                })
            }
        });
        
        // 縣市下拉選單
        $('#county-select').click(function(){
            $('#invoice-select').removeClass('open')
            $('#city-select').removeClass('open')
            $(this).toggleClass('open')
        })
        $(function() {
            for ( let i = 1; i <= 23; i++ ) {
                let clickedButton = $("#county-"+i);
                $(clickedButton).click(function() {
                    $('#county-select span').html($(this).html())
                    $('#county-select span').css('color','#344054')
                })
            }
        });

        // 鄉鎮市區下拉選單
        $('#city-select').click(function(){
            $('#invoice-select').removeClass('open')
            $('#county-select').removeClass('open')
            $(this).toggleClass('open')
        })
        $(function() {
            for ( let i = 1; i <= 12; i++ ) {
                let clickedButton = $("#city-"+i);
                $(clickedButton).click(function() {
                    $('#city-select span').html($(this).html())
                    $('#city-select span').css('color','#344054')
                    console.log(this)
                })
            }
        });
    </script>
</body>
</html>